version: "2.0"
nlu:
- intent: student_id_card
  examples: |
    - I want my student id card
    - Hi. I need to get my ID card.
    - Can I have my ID card?
    - Can you help me with my ID

rules:
  - rule: start student id card form
    steps:
    - intent: student_id_card
    - action: utter_i_can_help
    - action: student_id_card_form
    - active_loop: student_id_card_form
    - active_loop: null
    wait_for_user_input: false
    
  - rule: submit student id card form
    condition:
      - active_loop: student_id_card_form
    steps:
    - action: student_id_card_form
    - active_loop: null
    - action: action_validate_id_information
    wait_for_user_input: false
    
  # - rule: Start form again
  #   condition:
  #     - slot_was_set:
  #       - is_id_card_given: false
  #   steps:
  #   - action: utter_no_id_found
  #   - action: utter_try_again
  #   - action: student_id_card_form
  #   - active_loop: student_id_card_form

    
stories:
  - story: student id card form interrupted
    steps:
    - intent: student_id_card
    - action: utter_i_can_help
    - action: student_id_card_form
    - active_loop: student_id_card_form
    - intent: out_of_scope
    - action: utter_out_of_scope
    - action: student_id_card_form
    - active_loop: null
    - action: action_validate_id_information
    
  - story: student id card form interrupted
    steps:
    - intent: student_id_card
    - action: utter_i_can_help
    - action: student_id_card_form
    - active_loop: student_id_card_form
    - intent: help
    - action: utter_help
    - action: student_id_card_form
    - active_loop: null
    - action: action_validate_id_information